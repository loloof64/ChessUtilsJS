"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Bishop=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"b":"B"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=Bishop,Object.defineProperty(exports,"__esModule",{value:!0}),exports.Piece=exports.King=exports.Queen=exports.Rook=exports.Bishop=exports.Knight=exports.Pawn=void 0;var _Pawn2=_interopRequireDefault(_Pawn=require("./Pawn")),_Knight2=_interopRequireDefault(_Knight=require("./Knight")),_Bishop2=_interopRequireDefault(_Bishop=require("./Bishop")),_Rook2=_interopRequireDefault(_Rook=require("./Rook")),_Queen2=_interopRequireDefault(_Queen=require("./Queen")),_King2=_interopRequireDefault(_King=require("./King")),_Piece=require("./Piece"),_Piece2=_interopRequireDefault(_Piece);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.Pawn=_Pawn2.default,exports.Knight=_Knight2.default,exports.Bishop=_Bishop2.default,exports.Rook=_Rook2.default,exports.Queen=_Queen2.default,exports.King=_King2.default,exports.Piece=_Piece2.default,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var King=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"k":"K"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=King,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Knight=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"n":"N"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=Knight,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Pawn=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"p":"P"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=Pawn,Object.defineProperty(exports,"__esModule",{value:!0});var _Pawn,_Knight,_Bishop,_Rook,_Queen,_King;_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_Pawn2=_interopRequireDefault(_Pawn=require("./Pawn")),_Knight2=_interopRequireDefault(_Knight=require("./Knight")),_Bishop2=_interopRequireDefault(_Bishop=require("./Bishop")),_Rook2=_interopRequireDefault(_Rook=require("./Rook")),_Queen2=_interopRequireDefault(_Queen=require("./Queen")),_King2=_interopRequireDefault(_King=require("./King"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Piece=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"fromFEN",value:function(e){switch(e){case"P":return new _Pawn2.default(!1);case"p":return new _Pawn2.default(!0);case"N":return new _Knight2.default(!1);case"n":return new _Knight2.default(!0);case"B":return new _Bishop2.default(!1);case"b":return new _Bishop2.default(!0);case"R":return new _Rook2.default(!1);case"r":return new _Rook2.default(!0);case"Q":return new _Queen2.default(!1);case"q":return new _Queen2.default(!0);case"K":return new _King2.default(!1);case"k":return new _King2.default(!0)}}}]),e}();exports.default=Piece,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Queen=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"q":"Q"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=Queen,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Rook=function(){function t(e){_classCallCheck(this,t),this._isBlack=e}return _createClass(t,[{key:"toFEN",value:function(){return this._isBlack?"r":"R"}},{key:"blackOwner",get:function(){return this._isBlack}}]),t}();exports.default=Rook,Object.defineProperty(exports,"__esModule",{value:!0});_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var _pieces=require("./pieces");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Position=function(){function s(e,t,n,r,a,i,o,u,l){_classCallCheck(this,s),this._piecesArray=e,this._blackTurn=t,this._whiteShortCastle=n,this._whiteLongCastle=r,this._blackShortCastle=a,this._blackLongCastle=i,this._enPassantCell=o,this._halfMovesCountForNullity=u,this._moveNumber=l}return _createClass(s,[{key:"getPieceAt",value:function(e){return this._piecesArray[e.rank][e.file]}},{key:"toFEN",value:function(){var e=this._piecesArray.map(function(e){return e.map(function(e){return"_"===e?e:e.toFEN()}).join("")}).map(function(e){return r=0,e.split("").reduce(function(e,t){if("_"===t)return r+=1,e;if(0<r){var n=e+r+t;return r=0,n}return r=0,e+t},"")+(0<r?""+r:"");var r}).reverse().join("/"),t=this._blackTurn?"b":"w",n=(this._whiteShortCastle?"K":"")+(this._whiteLongCastle?"Q":"")+(this._blackShortCastle?"k":"")+(this._blackLongCastle?"q":"");return""===n&&(n="-"),e+" "+t+" "+n+" "+(this._enPassantCell?""+String.fromCharCode("a".charCodeAt(0)+this._enPassantCell.file)+String.fromCharCode("1".charCodeAt(0)+this._enPassantCell.rank):"-")+" "+this._halfMovesCountForNullity.toString()+" "+this._moveNumber.toString()}},{key:"blackTurn",get:function(){return this._blackTurn}},{key:"canDoWhiteShortCastle",get:function(){return this._whiteShortCastle}},{key:"canDoWhiteLongCastle",get:function(){return this._whiteLongCastle}},{key:"canDoBlackShortCastle",get:function(){return this._blackShortCastle}},{key:"canDoBlackLongCastle",get:function(){return this._blackLongCastle}},{key:"enPassantCell",get:function(){return this._enPassantCell}},{key:"halfMovesCountForNullity",get:function(){return this._halfMovesCountForNullity}},{key:"moveNumber",get:function(){return this._moveNumber}}],[{key:"fromFEN",value:function(e){var t=e.split(" ");return new s(t[0].split("").reduce(function(e,t){return"0"<=(a=t)&&a<="9"?e+(n="_",r=parseInt(t),new Array(r).fill("").reduce(function(e,t){return e+n},"")):e+t;var n,r,a},"").split("/").map(function(e,t){return e.split("").map(function(e,t){return _pieces.Piece.fromFEN(e)})}).reverse(),"w"!==t[1],t[2].includes("K"),t[2].includes("Q"),t[2].includes("k"),t[2].includes("q"),"-"===t[3]?void 0:{file:t[3].charCodeAt(0)-"a".charCodeAt(0),rank:t[3].charCodeAt(1)-"1".charCodeAt(0)},parseInt(t[4]),parseInt(t[5]))}}]),s}();exports.default=Position;